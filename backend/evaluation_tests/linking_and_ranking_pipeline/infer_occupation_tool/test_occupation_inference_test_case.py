from typing import Optional

from app.agent.experience.work_type import WorkType
from app.countries import Country
from evaluation_tests.compass_test_case import CompassTestCase


class InferOccupationToolTestCase(CompassTestCase):
    given_experience_title: str
    given_company: Optional[str] = None
    given_work_type: WorkType
    given_responsibilities: list[str]
    given_country_of_interest: Country
    given_top_k: int = 10
    given_top_p: int = 20
    number_of_titles: int = 5
    expected_occupations_found: list[str]


test_cases = [
    InferOccupationToolTestCase(
        name="Baker",
        given_experience_title="Baker",
        given_work_type=WorkType.SELF_EMPLOYMENT,
        given_company="",
        given_responsibilities=["I bake bread", "I clean my work place", "I order supplies", "I sell bread"],
        given_country_of_interest=Country.SOUTH_AFRICA,
        expected_occupations_found=["baker", "bakery shop manager", "pastry maker"]),
    InferOccupationToolTestCase(
        name="Title is not useful, infer from responsibilities",
        given_experience_title="Foo",
        given_work_type=WorkType.SELF_EMPLOYMENT,
        given_company="",
        given_responsibilities=["I cook street food", "I sell food to the local community"],
        given_country_of_interest=Country.SOUTH_AFRICA,
        expected_occupations_found=["street food vendor"],
    ),
    InferOccupationToolTestCase(
        name="Title is misleading, infer from responsibilities",
        given_experience_title="I sell gully to the local community",
        given_work_type=WorkType.SELF_EMPLOYMENT,
        given_company="",
        given_responsibilities=["I visit the Embassy every day",
                                "I talk with the embassy staff",
                                "I talk with the minister of foreign affairs"],

        given_country_of_interest=Country.SOUTH_AFRICA,
        expected_occupations_found=["import export specialist"],
    ),
    InferOccupationToolTestCase(
        name="Infer from responsibilities",
        given_experience_title="GDE Brigade member",
        given_work_type=WorkType.FORMAL_SECTOR_WAGED_EMPLOYMENT,
        given_company="Gauteng Department of Education",
        given_responsibilities=[
            # https://search67.com/2021/07/19/careers-employment-opportunity-for-youth-as-c0vid-19-screeners/
            "I make sure everyone follows the Covid-19 rules.",
            "I keep an eye on the kids to make sure they stay apart from each other.",
            "I check and record temperatures and other health signs.",
            "I clean and disinfect students, teachers, and visitors.",
            "I put together weekly and monthly reports."
        ],
        given_country_of_interest=Country.SOUTH_AFRICA,
        expected_occupations_found=["health and safety officer"],
    ),
    InferOccupationToolTestCase(
        name="Should not change title (emtpy responsibilities)",
        given_experience_title="Software Engineer",
        given_work_type=WorkType.FORMAL_SECTOR_WAGED_EMPLOYMENT,
        given_company="Google",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["software developer"],
    ),
    InferOccupationToolTestCase(
        name="Infer from glossary (emtpy responsibilities)",
        given_experience_title="I sell kota to the local community",
        given_work_type=WorkType.SELF_EMPLOYMENT,
        given_company="",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["street food vendor"],
    ),
    InferOccupationToolTestCase(
        name="Infer from glossary (emtpy responsibilities)",
        given_experience_title="I make bunny chow",
        given_work_type=WorkType.FORMAL_SECTOR_WAGED_EMPLOYMENT,
        given_company="Hungry Lion",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["cook"],
    ),
    InferOccupationToolTestCase(
        name="Infer from glossary & company name (emtpy responsibilities)",
        given_experience_title="I make bunny chow",
        given_work_type=WorkType.SELF_EMPLOYMENT,
        given_company="Hungry Tiger",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["street food vendor"],
    ),
    InferOccupationToolTestCase(
        name="Rephrase title (emtpy responsibilities)",
        given_experience_title="Help my sick parents",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["home care aide", "care at home worker"],
    ),
    InferOccupationToolTestCase(
        name="Infer from glossary (emtpy responsibilities)",
        given_experience_title="I braid hair of my friends",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["hairdresser"],
    ),
    InferOccupationToolTestCase(
        name="Icatus I42_0_4",
        given_experience_title="I keep company to my grandma when she is not feeling well",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["helping adults who need care or are sick"],
    ),
    InferOccupationToolTestCase(
        name="Icatus I42_0_3",
        given_experience_title="I fill my grandma’s taxes",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["helping adults who need care or are sick"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I42_0_2",
        given_experience_title="I give my uncle his medication ",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["helping adults who need care or are sick"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I42_0_1",
        given_experience_title="I make my grandma have lunch and I help her wash herself",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["helping adults who need care or are sick"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I42_0_6",
        given_experience_title="I take care of my dad’s medical appointments",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["helping adults who need care or are sick"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I42_0_5",
        given_experience_title="I keep an eye on my Grandpa",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["helping adults who need care or are sick"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I41_0_1",
        given_experience_title="I change my little brother’s diapers",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["caring for and teaching children in your family"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I41_0_3",
        given_experience_title="I help my sister with her homework. ",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["caring for and teaching children in your family"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I41_0_7",
        given_experience_title="I go to teacher/parents meetings.",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["caring for and teaching children in your family"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I41_0_6",
        given_experience_title="I keep an eye on my siblings during the day",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["caring for and teaching children in your family"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I41_0_5",
        given_experience_title="I play football with my cousins",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["caring for and teaching children in your family"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I41_0_2",
        given_experience_title="I give my brother medication",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["caring for and teaching children in your family"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I41_0_4",
        given_experience_title="I read bedtime stories to my niece",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["caring for and teaching children in your family"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I44_0_3",
        given_experience_title="I take my grandma to the supermarket",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["accompanying own children and/or dependent adults"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I44_0_2",
        given_experience_title="I bring my sister to school",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["accompanying own children and/or dependent adults"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I43_0_2",
        given_experience_title="I take care of my brother when he is having a hard time",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["helping other adults in the house or family"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I43_0_1",
        given_experience_title="I help my brother move because he broke his ankle",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["helping other adults in the house or family"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I34_0_2",
        given_experience_title="I dry the laundry",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["cleaning or fixing clothes and shoes"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I34_0_1",
        given_experience_title="I clean the sheets",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["cleaning or fixing clothes and shoes"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I34_0_3",
        given_experience_title="I iron my dad’s shirts",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["cleaning or fixing clothes and shoes"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I34_0_4",
        given_experience_title="I clean my shoes",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["cleaning or fixing clothes and shoes"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I32_0_1",
        given_experience_title="I clean the windows",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["cleaning and looking after your home or garden"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I32_0_2",
        given_experience_title="I take away the snow around the house",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["cleaning and looking after your home or garden"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I32_0_3",
        given_experience_title="I make compost with vegetable peals",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["cleaning and looking after your home or garden"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I32_0_4",
        given_experience_title="I water the plants",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["cleaning and looking after your home or garden"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I33_0_1",
        given_experience_title="I paint the house’s walls",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["fixing things in your home or car"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I33_0_2",
        given_experience_title="I install the TV",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["fixing things in your home or car"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I33_0_3",
        given_experience_title="I change the car’s oil",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["fixing things in your home or car"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I31_0_3",
        given_experience_title="I do the dishes",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["cooking and planning meals"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I31_0_1",
        given_experience_title="I make cookies for my daughter",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["cooking and planning meals"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I31_0_2",
        given_experience_title="I set the table and serve my family",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["cooking and planning meals"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I31_0_4",
        given_experience_title="I put fruits in bocals to store them for the winter.",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["cooking and planning meals"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I35_0_2",
        given_experience_title="I check the savings to plan for trips.",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["managing and planning for your household"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I35_0_1",
        given_experience_title="I pay my bills online.",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["managing and planning for your household"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I36_0_1",
        given_experience_title="I play with my dog outside.",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["taking care of pets"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I36_0_2",
        given_experience_title="I take my dog to the dog-sitter.",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["taking care of pets"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I37_0_2",
        given_experience_title="I look for a hairdresser for my mom and pay for an appointment.",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["shopping for your family or household"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I37_0_1",
        given_experience_title="I buy my parents fournitures.",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["shopping for your family or household"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I52_0_3",
        given_experience_title="I take care of yougnpeople in the community.",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["unpaid volunteer cultural activities recreation and sports activities"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I52_0_4",
        given_experience_title="I help my church with accounting. ",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["unpaid volunteer office/administrative work"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I52_0_2",
        given_experience_title="I sell cake at my dauther’s school baking parties",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["unpaid volunteer preparing/serving meals, cleaning up"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I52_0_1",
        given_experience_title="I help clean the beach after a storm.",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["unpaid volunteer work on road/building repair, clearing and preparing land, "
                                    "cleaning (streets, markets, etc.), and construction"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I51_0_4",
        given_experience_title="I check on my eldery neighboor when it’s very hot outside.",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["unpaid volunteer care for adults"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I51_0_3",
        given_experience_title="I teach my young neighbor spanish.",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["unpaid volunteer childcare and instruction"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I51_0_1",
        given_experience_title="I babysit my cousin’s cats.",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["unpaid volunteer household maintenance, management, construction, renovation and repair"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I51_0_2",
        given_experience_title="I bring groceries to my elderly neighbor.",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["unpaid volunteer shopping/purchasing goods and services"],
        ),
    InferOccupationToolTestCase(
        name="Icatus I51_0_5",
        given_experience_title="I replace my uncle in his shop when he is away.",
        given_work_type=WorkType.UNSEEN_UNPAID,
        given_company="home",
        given_country_of_interest=Country.SOUTH_AFRICA,
        given_responsibilities=[],
        expected_occupations_found=["unpaid volunteer unpaid help in enterprises owned by other households"],
        ),
]
