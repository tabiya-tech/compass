{"exportVersion":8,"dashboards":{"dashboard-1":{"title":"Compass Ajira Dashboard (Public)","layout":[{"w":1,"h":1,"x":0,"y":1,"i":"item-1"},{"w":4,"h":3,"x":2,"y":1,"i":"item-2"},{"w":3,"h":3,"x":6,"y":1,"i":"item-3"},{"w":2,"h":1,"x":0,"y":3,"i":"item-4"},{"w":2,"h":1,"x":0,"y":2,"i":"item-5"},{"w":1,"h":1,"x":1,"y":1,"i":"item-6"},{"w":2,"h":1,"x":0,"y":8,"i":"item-7"},{"w":3,"h":1,"x":0,"y":0,"i":"item-8"},{"w":6,"h":1,"x":3,"y":0,"i":"item-9"},{"w":3,"h":1,"x":0,"y":4,"i":"item-10"},{"w":6,"h":1,"x":3,"y":4,"i":"item-11"},{"w":3,"h":1,"x":0,"y":14,"i":"item-12"},{"w":6,"h":1,"x":3,"y":14,"i":"item-13"},{"w":1,"h":1,"x":2,"y":15,"i":"item-14"},{"w":2,"h":1,"x":0,"y":15,"i":"item-15"},{"w":1,"h":1,"x":0,"y":16,"i":"item-16"},{"w":2,"h":1,"x":1,"y":16,"i":"item-17"},{"w":2,"h":1,"x":3,"y":15,"i":"item-18"},{"w":2,"h":1,"x":3,"y":16,"i":"item-19"},{"w":2,"h":1,"x":5,"y":15,"i":"item-20"},{"w":2,"h":1,"x":5,"y":16,"i":"item-21"},{"w":2,"h":1,"x":7,"y":15,"i":"item-22"},{"w":2,"h":1,"x":7,"y":16,"i":"item-23"},{"w":2,"h":1,"x":0,"y":17,"i":"item-24"},{"w":7,"h":1,"x":2,"y":17,"i":"item-25"},{"w":2,"h":2,"x":0,"y":18,"i":"item-26"},{"w":2,"h":1,"x":2,"y":18,"i":"item-27"},{"w":2,"h":1,"x":2,"y":19,"i":"item-28"},{"w":3,"h":2,"x":4,"y":18,"i":"item-29"},{"w":2,"h":1,"x":7,"y":18,"i":"item-30"},{"w":2,"h":1,"x":7,"y":19,"i":"item-31"},{"w":9,"h":2,"x":0,"y":12,"i":"item-32"},{"w":6,"h":2,"x":3,"y":5,"i":"item-33"},{"w":3,"h":1,"x":0,"y":5,"i":"item-34"},{"w":1,"h":1,"x":0,"y":6,"i":"item-35"},{"w":1,"h":1,"x":2,"y":6,"i":"item-36"},{"w":1,"h":1,"x":1,"y":6,"i":"item-37"},{"w":7,"h":2,"x":2,"y":8,"i":"item-38"},{"w":7,"h":2,"x":2,"y":10,"i":"item-39"},{"w":3,"h":1,"x":0,"y":7,"i":"item-40"},{"w":6,"h":1,"x":3,"y":7,"i":"item-41"}],"description":"Information about Ajira's Compass deployment.","embedding":{},"filters":[{"disabled":false,"type":"Date","settings":{"type":"relative","absolute":{"from":{"enabled":false,"time":"00:00:00","inclusive":false},"to":{"enabled":false,"time":"00:00:00","inclusive":false}},"relative":{"from":{"enabled":true,"value":"2","tense":"last","unit":"weeks"},"until":{"enabled":false,"value":""}},"period":{"direction":"previous","count":"1","unit":"month","includeCurrent":true}},"name":"timestamp","linkedFields":[{"dataSourceId":"data-source-1","fieldPath":"timestamp"}]}]}},"items":{"item-2":{"title":"Unique Users Registered Over Time","description":"","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"line-discrete","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[],"channels":{"x":{"field":"timestamp","type":"nominal","inferredType":"Date","channelType":"category","isBinning":true,"temporalBinning":["year","month","date"]},"y":{"field":"_id","type":"quantitative","inferredType":"String","channelType":"aggregation","aggregate":"distinct"}},"reductions":{},"customisations":{"options":{"colorDiscrete":{"enabled":true,"value":["#16CC62"]},"lineSmoothing":{"enabled":true,"value":"step-before"},"dataMarkers":{"enabled":true,"value":null},"dataValueLabels":{"enabled":true,"value":null}},"axes":{"x":{"categoryLabelAngle":{"enabled":true,"value":"horizontal"}},"y":{}},"channels":{"x":{"labelOverride":{"enabled":true,"value":"Date Created"},"datePreset":{"enabled":true,"value":"Custom"},"dateTimeFormatting":{"enabled":true,"value":"DD-MMM"}},"y":{"labelOverride":{"enabled":true,"value":"Unique Users"},"numberFormatting":{"enabled":true,"value":"Default"}}},"conditionalFormatting":[]},"chartType":"Line","meta":{},"sample":false,"query":"{ event_type: 100001 }","queryId":null,"interactiveFiltering":"filter","embedding":{}},"item-1":{"title":"Users Registered","description":"","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"number","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[],"channels":{"value":{"field":"_id","type":"quantitative","inferredType":"String","channelType":"aggregation","aggregate":"distinct"}},"reductions":{},"customisations":{"options":{},"axes":{},"channels":{"value":{"labelOverride":{"enabled":true,"value":"Unique Users"},"numberFormatting":{"enabled":true,"value":"Default"}}},"conditionalFormatting":[{"type":"discrete","conditions":[{"target":{"value":"value","type":"CHANNEL"},"operator":"NUMBER_GREATER_THAN_OR_EQUAL_TO","value":"20"}],"applyToEntireRow":false,"styling":{"color":"rgb(45, 134, 82)","backgroundColor":"rgba(0, 0, 0, 0)","fontStyle":"normal","fontWeight":"normal","textDecoration":"initial"}},{"type":"discrete","conditions":[{"target":{"value":"value","type":"CHANNEL"},"operator":"NUMBER_LESS_THAN","value":"20"}],"applyToEntireRow":false,"styling":{"color":"rgb(193, 4, 34)","backgroundColor":"rgba(0, 0, 0, 0)","fontStyle":"normal","fontWeight":"normal","textDecoration":"initial"}}]},"chartType":"Number","meta":{},"sample":false,"query":"{ event_type: 100001 }","queryId":null,"interactiveFiltering":"filter","embedding":{}},"item-3":{"title":"Location","description":"of users who chose to share it :)","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"geo-heatmap","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[],"channels":{"geopoint":{"field":"coordinates","type":"geospatial_array","inferredType":"Number","channelType":"geopoint"},"intensity":{"field":"_id","type":"quantitative","inferredType":"String","channelType":"aggregation","aggregate":"count"}},"reductions":{},"customisations":{"options":{"legendPosition":{"enabled":true,"value":"bottom"}},"axes":{},"channels":{"geopoint":{},"intensity":{"labelOverride":{"enabled":true,"value":"No. of Users"},"numberFormatting":{"enabled":true,"value":"Default"}}},"conditionalFormatting":[]},"chartType":"Geospatial Heatmap","meta":{"viewport":{"center":[28.22697003891834,-19.423828125000004],"zoom":3},"legends":{"min":1,"max":103},"indexes":{"channel":"geopoint","indexLat":0,"indexLong":1}},"sample":false,"query":"{ event_type: 200003 }","queryId":null,"interactiveFiltering":"filter","embedding":{}},"item-4":{"title":"Browser Type","description":"","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"donut","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[{"fieldPath":"normalized_browser_type","rawExpression":"{ \"$toLower\": { \"$ifNull\": [ \"$browser_type\", \"UNKNOWN\" ] } }","derivedMQL":"{\"$toLower\":{\"$ifNull\":[\"$browser_type\",\"UNKNOWN\"]}}"}],"channels":{"value":{"field":"_id","type":"quantitative","inferredType":"String","channelType":"aggregation","aggregate":"count"},"label":{"field":"normalized_browser_type","type":"nominal","inferredType":"String","channelType":"category","isBinning":false,"sort":{"axis":"Aggregated Value","order":"descending"},"allOthers":true}},"reductions":{},"customisations":{"options":{"colorDiscrete":{"enabled":true,"value":{"range":["#16CC62","#196EE6","#E6B219","#E6196E","#116149","#19C3E6","#E65D19","#C10422","#1392AB","#8A27A5"],"domain":["chrome","edge","safari","samsung internet","firefox","opera","unknown","brave","mobile safari","miui browser"]}},"dataCategoryLabels":{"enabled":true,"value":null},"dataValueLabels":{"enabled":true,"value":"percentage"},"labelSize":{"enabled":true,"value":"150"}},"axes":{},"channels":{"value":{"numberFormatting":{"enabled":true,"value":"Default"}},"label":{"labelOverride":{"enabled":true,"value":"Browser Type"}}},"conditionalFormatting":[]},"chartType":"Donut","meta":{"legends":{"min":1,"max":17}},"sample":false,"query":"{event_type: 200004}","queryId":null,"interactiveFiltering":"filter","embedding":{}},"item-5":{"title":"Device Type","description":"","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"donut","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[{"fieldPath":"normalized_device_type","rawExpression":"{ \"$toLower\": \"$device_type\" }\n","derivedMQL":"{\"$toLower\":\"$device_type\"}"}],"channels":{"value":{"field":"_id","type":"quantitative","inferredType":"String","channelType":"aggregation","aggregate":"count"},"label":{"field":"normalized_device_type","type":"nominal","inferredType":"String","channelType":"category","isBinning":false,"allOthers":true}},"reductions":{},"customisations":{"options":{"colorDiscrete":{"enabled":true,"value":{"range":["#16CC62","#196EE6","#E6B219"],"domain":["mobile","browser","tablet"]}},"dataCategoryLabels":{"enabled":true,"value":null},"dataValueLabels":{"enabled":true,"value":"percentage"},"labelSize":{"enabled":true,"value":"149"}},"axes":{},"channels":{"value":{"numberFormatting":{"enabled":true,"value":"Default"}},"label":{"labelOverride":{"enabled":true,"value":"Device Type"}}},"conditionalFormatting":[]},"chartType":"Donut","meta":{"legends":{"min":1,"max":17}},"sample":false,"query":"{event_type: 200004}","queryId":null,"interactiveFiltering":"filter","embedding":{}},"item-6":{"title":"Number of users","description":"who shared location","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"number","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[],"channels":{"value":{"field":"coordinates","type":"quantitative","inferredType":"Number","transformedType":"Number","channelType":"aggregation","aggregate":"count"}},"reductions":{"value":[{"dimensionality":1,"field":"coordinates","type":"Array length","arguments":[0]}]},"customisations":{"options":{},"axes":{},"channels":{"value":{"labelOverride":{"enabled":true,"value":"Unique Users"},"numberFormatting":{"enabled":true,"value":"Custom"}}},"conditionalFormatting":[]},"chartType":"Number","meta":{},"sample":false,"query":"{ event_type: 200003 }","queryId":null,"interactiveFiltering":"filter","embedding":{}},"item-7":{"title":"Concluded Conversations","description":"","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"number","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[],"channels":{"value":{"field":"phase","type":"quantitative","inferredType":"String","channelType":"aggregation","aggregate":"count"}},"reductions":{},"customisations":{"options":{},"axes":{},"channels":{"value":{"numberFormatting":{"enabled":true,"value":"Default"}}},"conditionalFormatting":[]},"chartType":"Number","meta":{},"sample":false,"query":"{ event_type: 100002, phase: \"ENDED\" }","queryId":null,"interactiveFiltering":"filter","embedding":{}},"item-14":{"title":"Count of Users","description":"that provided overall Feedback","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"bar-grouped","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[],"channels":{"value":{"field":"_id","type":"quantitative","inferredType":"String","channelType":"aggregation","aggregate":"count"}},"reductions":{},"customisations":{"options":{},"axes":{},"channels":{"value":{"numberFormatting":{"enabled":true,"value":"Default"}}},"conditionalFormatting":[]},"chartType":"Number","meta":{},"sample":false,"query":"{\n  event_type: 100003\n}","queryId":null,"interactiveFiltering":"highlight","embedding":{}},"item-15":{"title":"Unique Users Registered","description":"","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"number","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[],"channels":{"value":{"field":"_id","type":"quantitative","inferredType":"String","channelType":"aggregation","aggregate":"distinct"}},"reductions":{},"customisations":{"options":{},"axes":{},"channels":{"value":{"labelOverride":{"enabled":true,"value":"Unique Users"},"numberFormatting":{"enabled":true,"value":"Default"}}},"conditionalFormatting":[{"type":"discrete","conditions":[{"target":{"value":"value","type":"CHANNEL"},"operator":"NUMBER_GREATER_THAN_OR_EQUAL_TO","value":"20"}],"applyToEntireRow":false,"styling":{"color":"rgb(45, 134, 82)","backgroundColor":"rgba(0, 0, 0, 0)","fontStyle":"normal","fontWeight":"normal","textDecoration":"initial"}},{"type":"discrete","conditions":[{"target":{"value":"value","type":"CHANNEL"},"operator":"NUMBER_LESS_THAN","value":"20"}],"applyToEntireRow":false,"styling":{"color":"rgb(193, 4, 34)","backgroundColor":"rgba(0, 0, 0, 0)","fontStyle":"normal","fontWeight":"normal","textDecoration":"initial"}}]},"chartType":"Number","meta":{},"sample":false,"query":"{ event_type: 100001 }","queryId":null,"interactiveFiltering":"highlight","embedding":{}},"item-22":{"title":"Customer Effort Score","description":"(CES)","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"gauge","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[{"fieldPath":"CES","rawExpression":"{\n        $cond: [\n          { $eq: [\"$totalResponses\", 0] },\n          0,\n              { $divide: [\"$lowEffortResponses\", \"$totalResponses\"] },\n        ]\n      }","derivedMQL":"{\"$cond\":[{\"$eq\":[\"$totalResponses\",0]},0,{\"$divide\":[\"$lowEffortResponses\",\"$totalResponses\"]}]}"}],"channels":{"value":{"field":"CSAT","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"sum"}},"reductions":{},"customisations":{"options":{},"axes":{"value":{"scaleMax":{"enabled":true,"value":"1"},"scaleMin":{"enabled":true,"value":"0"}}},"channels":{"value":{"numberFormatting":{"enabled":true,"value":"Custom"},"numberDecimals":{"enabled":true,"value":"1"},"numberMultiplier":{"enabled":true,"value":"100"}}},"conditionalFormatting":[]},"chartType":"Gauge","meta":{},"sample":false,"query":"[\n  {\n    $match: {\n      event_type: 100004,\n      feedback_type: \"CES\"\n    }\n  },\n  {\n    $group: {\n      _id: null,\n      totalResponses: { $sum: 1 },\n      lowEffortResponses: { $sum: \"$value\" } // value is 1 if user had low effort\n    }\n  }\n]","queryId":null,"interactiveFiltering":"highlight","embedding":{}},"item-19":{"title":"Count of Users who submitted NPS","description":"Net Promoter Score","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"number","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[{"fieldPath":"NPS_count","rawExpression":"{\n  \"$cond\": [\n    {\n      \"$and\": [\n        { \"$eq\": [\"$event_type\", 100004] },\n        { \"$eq\": [\"$feedback_type\", \"NPS\"] }\n      ]\n    },\n    1,\n    0\n  ]\n}\n","derivedMQL":"{\"$cond\":[{\"$and\":[{\"$eq\":[\"$event_type\",100004]},{\"$eq\":[\"$feedback_type\",\"NPS\"]}]},1,0]}"},{"fieldPath":"NPS","rawExpression":"{\n      npsScore: {\n            $subtract: [\n              { $divide: [\"$promoters\", \"$totalResponses\"] },\n              { $divide: [\"$detractors\", \"$totalResponses\"] }\n        ]\n      }\n    }","derivedMQL":"{\"npsScore\":{\"$subtract\":[{\"$divide\":[\"$promoters\",\"$totalResponses\"]},{\"$divide\":[\"$detractors\",\"$totalResponses\"]}]}}"}],"channels":{"value":{"field":"NPS_count","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"sum"}},"reductions":{},"customisations":{"options":{},"axes":{},"channels":{"value":{"numberFormatting":{"enabled":true,"value":"Default"}}},"conditionalFormatting":[]},"chartType":"Number","meta":{},"sample":false,"query":null,"queryId":null,"interactiveFiltering":"highlight","embedding":{}},"item-18":{"title":"Net Promoter Score","description":"(NPS)","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"gauge","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[{"fieldPath":"NPS","rawExpression":"{\n      npsScore: {\n            $subtract: [\n              { $divide: [\"$promoters\", \"$totalResponses\"] },\n              { $divide: [\"$detractors\", \"$totalResponses\"] }\n        ]\n      }\n    }","derivedMQL":"{\"npsScore\":{\"$subtract\":[{\"$divide\":[\"$promoters\",\"$totalResponses\"]},{\"$divide\":[\"$detractors\",\"$totalResponses\"]}]}}"}],"channels":{"value":{"field":"NPS.npsScore","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"sum"}},"reductions":{},"customisations":{"options":{},"axes":{"value":{"scaleMax":{"enabled":true,"value":"1"},"scaleMin":{"enabled":true,"value":"-1"}}},"channels":{"value":{"numberFormatting":{"enabled":true,"value":"Custom"},"numberMultiplier":{"enabled":true,"value":"100"}}},"conditionalFormatting":[]},"chartType":"Gauge","meta":{},"sample":false,"query":"[\n  {\n    $match: {\n      event_type: 100004,\n      feedback_type: \"NPS\" // Only include NPS scores\n    }\n  },\n  {\n    $group: {\n      _id: null,\n      totalResponses: { $sum: 1 },\n      promoters: { $sum: { $cond: [{ $eq: [\"$value\", 1] }, 1, 0] } },\n      passives: { $sum: { $cond: [{ $eq: [\"$value\", 0] }, 1, 0] } },\n      detractors: { $sum: { $cond: [{ $eq: [\"$value\", -1] }, 1, 0] } }\n    }\n  }\n]","queryId":null,"interactiveFiltering":"highlight","embedding":{}},"item-20":{"title":"Customer Satisfaction Score","description":"(CSAT)","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"gauge","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[{"fieldPath":"CSAT","rawExpression":"{\n        $cond: [\n          { $eq: [\"$totalResponses\", 0] },\n          0,\n              { $divide: [\"$satisfiedResponses\", \"$totalResponses\"] },\n        ]\n}","derivedMQL":"{\"$cond\":[{\"$eq\":[\"$totalResponses\",0]},0,{\"$divide\":[\"$satisfiedResponses\",\"$totalResponses\"]}]}"}],"channels":{"value":{"field":"CSAT","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"sum"}},"reductions":{},"customisations":{"options":{},"axes":{"value":{"scaleMax":{"enabled":true,"value":"1"},"scaleMin":{"enabled":true,"value":"0"}}},"channels":{"value":{"numberFormatting":{"enabled":true,"value":"Custom"},"numberDecimals":{"enabled":true,"value":"1"},"numberMultiplier":{"enabled":true,"value":"100"}}},"conditionalFormatting":[]},"chartType":"Gauge","meta":{},"sample":false,"query":"[\n  {\n    $match: {\n      event_type: 100004,\n      feedback_type: \"CSAT\"\n    }\n  },\n  {\n    $group: {\n      _id: null,\n      totalResponses: { $sum: 1 },\n      satisfiedResponses: { $sum: \"$value\" } // 1s count, 0s don't\n    }\n  }\n]","queryId":null,"interactiveFiltering":"highlight","embedding":{}},"item-21":{"title":"Count of Users who submitted CSAT","description":"Customer Satisfaction Rating","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"number","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[{"fieldPath":"CSAT_count","rawExpression":"{\n  \"$cond\": [\n    {\n      \"$and\": [\n        { \"$eq\": [\"$event_type\", 100004] },\n        { \"$eq\": [\"$feedback_type\", \"CSAT\"] }\n      ]\n    },\n    1,\n    0\n  ]\n}\n","derivedMQL":"{\"$cond\":[{\"$and\":[{\"$eq\":[\"$event_type\",100004]},{\"$eq\":[\"$feedback_type\",\"CSAT\"]}]},1,0]}"}],"channels":{"value":{"field":"CSAT_count","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"sum"}},"reductions":{},"customisations":{"options":{},"axes":{},"channels":{"value":{"numberFormatting":{"enabled":true,"value":"Default"}}},"conditionalFormatting":[]},"chartType":"Number","meta":{},"sample":false,"query":null,"queryId":null,"interactiveFiltering":"highlight","embedding":{}},"item-23":{"title":"Count of Users who submitted CES","description":"Customer Effort Score","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"number","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[{"fieldPath":"CES_count","rawExpression":"{\n  \"$cond\": [\n    {\n      \"$and\": [\n        { \"$eq\": [\"$event_type\", 100004] },\n        { \"$eq\": [\"$feedback_type\", \"CES\"] }\n      ]\n    },\n    1,\n    0\n  ]\n}\n","derivedMQL":"{\"$cond\":[{\"$and\":[{\"$eq\":[\"$event_type\",100004]},{\"$eq\":[\"$feedback_type\",\"CES\"]}]},1,0]}"}],"channels":{"value":{"field":"CES_count","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"sum"}},"reductions":{},"customisations":{"options":{},"axes":{},"channels":{"value":{"numberFormatting":{"enabled":true,"value":"Default"}}},"conditionalFormatting":[]},"chartType":"Number","meta":{},"sample":false,"query":null,"queryId":null,"interactiveFiltering":"highlight","embedding":{}},"item-16":{"title":"Disliked Messages","description":"per 1000","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"number","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[],"channels":{"value":{"field":"dislikesPerThousandMessages","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"sum"}},"reductions":{},"customisations":{"options":{},"axes":{},"channels":{"value":{"numberFormatting":{"enabled":true,"value":"Custom"},"numberDecimals":{"enabled":true,"value":"2"}}},"conditionalFormatting":[{"type":"discrete","conditions":[{"target":{"value":"value","type":"CHANNEL"},"operator":"NUMBER_LESS_THAN","value":"50"}],"applyToEntireRow":false,"styling":{"color":"rgb(22, 204, 98)","backgroundColor":"rgba(0, 0, 0, 0)","fontStyle":"normal","fontWeight":"normal","textDecoration":"initial"}},{"type":"discrete","conditions":[{"target":{"value":"value","type":"CHANNEL"},"operator":"NUMBER_GREATER_THAN","value":"300"}],"applyToEntireRow":false,"styling":{"color":"rgb(193, 4, 34)","backgroundColor":"rgba(0, 0, 0, 0)","fontStyle":"normal","fontWeight":"normal","textDecoration":"initial"}}]},"chartType":"Number","meta":{},"sample":false,"query":"[\n  {\n    $match: {\n      event_type: { $in: [100005, 100006] }\n    }\n  },\n  {\n    $addFields: {\n      isDisliked: {\n        $cond: [\n          { $and: [{ $eq: [\"$event_type\", 100006] }, { $eq: [\"$kind\", \"DISLIKED\"] }] },\n          1,\n          0\n        ]\n      },\n      messageCount: {\n        $cond: [\n          { $eq: [\"$event_type\", 100005] },\n          \"$compass_message_count\",\n          0\n        ]\n      }\n    }\n  },\n  {\n    $group: {\n      _id: null,\n      totalDislikes: { $sum: \"$isDisliked\" },\n      totalMessages: { $sum: \"$messageCount\" }\n    }\n  },\n  {\n    $project: {\n      dislikesPerThousandMessages: {\n        $cond: [\n          { $eq: [\"$totalMessages\", 0] },\n          0,\n          { $multiply: [{ $divide: [\"$totalDislikes\", \"$totalMessages\"] }, 1000] }\n        ]\n      }\n    }\n  }\n]","queryId":null,"interactiveFiltering":"highlight","embedding":{}},"item-8":{"title":"","description":"","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"top-item","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[{"fieldPath":"label","rawExpression":"{ \"$literal\": \"User Information Overview\" }\n","derivedMQL":"{\"$literal\":\"User Information Overview\"}"}],"channels":{"sort":{"field":"label","type":"nominal","inferredType":"String","channelType":"sort","sort":{"axis":"Category","order":"descending"},"isLimiting":true,"limitingSize":1},"display":{"field":"label","type":"nominal","inferredType":"String","channelType":"any"}},"reductions":{},"customisations":{"options":{"labelSize":{"enabled":true,"value":"70"}},"axes":{},"channels":{"sort":{},"display":{"labelOverride":{"enabled":true,"value":"Section"}}},"conditionalFormatting":[]},"chartType":"Top Item","meta":{"legends":{"min":1,"max":98}},"sample":false,"query":null,"queryId":null,"interactiveFiltering":"highlight","embedding":{}},"item-11":{"title":"","description":"","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"top-item","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[{"fieldPath":"label","rawExpression":"{ \"$literal\": \"                     \" }\n","derivedMQL":"{\"$literal\":\"                     \"}"}],"channels":{"sort":{"field":"label","type":"nominal","inferredType":"String","channelType":"sort","sort":{"axis":"Category","order":"descending"},"isLimiting":true,"limitingSize":1},"display":{"field":"label","type":"nominal","inferredType":"String","channelType":"any"}},"reductions":{},"customisations":{"options":{"labelSize":{"enabled":true,"value":"70"}},"axes":{},"channels":{"sort":{},"display":{"labelOverride":{"enabled":true,"value":" "}}},"conditionalFormatting":[]},"chartType":"Top Item","meta":{"legends":{"min":1,"max":98}},"sample":false,"query":null,"queryId":null,"interactiveFiltering":"highlight","embedding":{}},"item-9":{"title":"","description":"","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"top-item","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[{"fieldPath":"label","rawExpression":"{ \"$literal\": \"                     \" }\n","derivedMQL":"{\"$literal\":\"                     \"}"}],"channels":{"sort":{"field":"label","type":"nominal","inferredType":"String","channelType":"sort","sort":{"axis":"Category","order":"descending"},"isLimiting":true,"limitingSize":1},"display":{"field":"label","type":"nominal","inferredType":"String","channelType":"any"}},"reductions":{},"customisations":{"options":{"labelSize":{"enabled":true,"value":"70"}},"axes":{},"channels":{"sort":{},"display":{"labelOverride":{"enabled":true,"value":" "}}},"conditionalFormatting":[]},"chartType":"Top Item","meta":{"legends":{"min":1,"max":98}},"sample":false,"query":null,"queryId":null,"interactiveFiltering":"highlight","embedding":{}},"item-10":{"title":"","description":"","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"top-item","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[{"fieldPath":"label","rawExpression":"{ \"$literal\": \"User Retention Overview\" }\n","derivedMQL":"{\"$literal\":\"User Retention Overview\"}"}],"channels":{"sort":{"field":"label","type":"nominal","inferredType":"String","channelType":"sort","sort":{"axis":"Category","order":"descending"},"isLimiting":true,"limitingSize":1},"display":{"field":"label","type":"nominal","inferredType":"String","channelType":"any"}},"reductions":{},"customisations":{"options":{"labelSize":{"enabled":true,"value":"70"}},"axes":{},"channels":{"sort":{},"display":{"labelOverride":{"enabled":true,"value":"Section"}}},"conditionalFormatting":[]},"chartType":"Top Item","meta":{"legends":{"min":1,"max":98}},"sample":false,"query":null,"queryId":null,"interactiveFiltering":"highlight","embedding":{}},"item-12":{"title":"","description":"","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"top-item","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[{"fieldPath":"label","rawExpression":"{ \"$literal\": \"User Feedback Overview\" }\n","derivedMQL":"{\"$literal\":\"User Feedback Overview\"}"}],"channels":{"sort":{"field":"label","type":"nominal","inferredType":"String","channelType":"sort","sort":{"axis":"Category","order":"descending"},"isLimiting":true,"limitingSize":1},"display":{"field":"label","type":"nominal","inferredType":"String","channelType":"any"}},"reductions":{},"customisations":{"options":{"labelSize":{"enabled":true,"value":"70"}},"axes":{},"channels":{"sort":{},"display":{"labelOverride":{"enabled":true,"value":"Section"}}},"conditionalFormatting":[]},"chartType":"Top Item","meta":{"legends":{"min":1,"max":98}},"sample":false,"query":null,"queryId":null,"interactiveFiltering":"highlight","embedding":{}},"item-13":{"title":"","description":"","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"top-item","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[{"fieldPath":"label","rawExpression":"{ \"$literal\": \"                     \" }\n","derivedMQL":"{\"$literal\":\"                     \"}"}],"channels":{"sort":{"field":"label","type":"nominal","inferredType":"String","channelType":"sort","sort":{"axis":"Category","order":"descending"},"isLimiting":true,"limitingSize":1},"display":{"field":"label","type":"nominal","inferredType":"String","channelType":"any"}},"reductions":{},"customisations":{"options":{"labelSize":{"enabled":true,"value":"70"}},"axes":{},"channels":{"sort":{},"display":{"labelOverride":{"enabled":true,"value":" "}}},"conditionalFormatting":[]},"chartType":"Top Item","meta":{"legends":{"min":1,"max":98}},"sample":false,"query":null,"queryId":null,"interactiveFiltering":"highlight","embedding":{}},"item-17":{"title":"Dislike reasons breakdown","description":"","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"donut","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[],"channels":{"value":{"field":"reasons","type":"quantitative","inferredType":"String","transformedType":"String","channelType":"aggregation","aggregate":"count"},"label":{"field":"reasons","type":"nominal","inferredType":"String","transformedType":"String","channelType":"category","isBinning":false,"allOthers":true}},"reductions":{"value":[{"dimensionality":1,"field":"reasons","type":"Unwind array","arguments":[]}],"label":[{"dimensionality":1,"field":"reasons","type":"Unwind array","arguments":[]}]},"customisations":{"options":{"colorDiscrete":{"enabled":true,"value":["#16CC62","#196EE6","#E6B219","#E6196E","#19C3E6","#116149","#E65D19","#8A27A5","#1392AB","#C10422","#73E0A1","#8CB6F2","#F0D175","#F075A8","#75DBF0","#70A092","#F09E75","#B97DC9","#71BECD","#DA6879"]},"dataValueLabels":{"enabled":true,"value":"value"},"labelSize":{"enabled":true,"value":"120"}},"axes":{},"channels":{"value":{"labelOverride":{"enabled":true,"value":"Reasons for dislike reaction"},"numberFormatting":{"enabled":true,"value":"Default"}},"label":{"labelOverride":{"enabled":true,"value":"Reasons"}}},"conditionalFormatting":[]},"chartType":"Donut","meta":{},"sample":false,"query":"{event_type: 100006}","queryId":null,"interactiveFiltering":"highlight","embedding":{}},"item-31":{"title":"CV Downloaded","description":"Users who downloaded a CV before completing the conversation","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"donut","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[],"channels":{"value":{"field":"count","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"sum"},"label":{"field":"cv_format","type":"nominal","inferredType":"String","channelType":"category","isBinning":false,"sort":{"axis":"Category","order":"ascending"},"allOthers":true}},"reductions":{},"customisations":{"options":{"colorDiscrete":{"enabled":true,"value":{"range":["#71becd","#b97dc9"],"domain":["DOCX","PDF"]}},"dataCategoryLabels":{"enabled":true,"value":null},"dataValueLabels":{"enabled":true,"value":"value"}},"axes":{},"channels":{"value":{"labelOverride":{"enabled":true,"value":"count ( _id )"},"numberFormatting":{"enabled":true,"value":"Default"}},"label":{}},"conditionalFormatting":[]},"chartType":"Donut","meta":{"legends":{"min":1,"max":17}},"sample":false,"query":"[\n  {\n    $match: {\n      event_type: { $in: [100008, 100002, 200001] }\n    }\n  },\n  {\n    $group: {\n      _id: \"$anonymized_session_id\",\n      hasExperienceExplored: {\n        $max: {\n          $cond: [\n            {\n              $and: [\n                { $eq: [\"$event_type\", 100008] },\n                { $gte: [\"$experience_count\", 1] }\n              ]\n            },\n            1,\n            0\n          ]\n        }\n      },\n      hasEndedPhase: {\n        $max: {\n          $cond: [\n            {\n              $and: [\n                { $eq: [\"$event_type\", 100002] },\n                { $eq: [\"$phase\", \"ENDED\"] }\n              ]\n            },\n            1,\n            0\n          ]\n        }\n      },\n      cvFormats: {\n        $push: {\n          $cond: [\n            { $eq: [\"$event_type\", 200001] },\n            \"$cv_format\",\n            \"$$REMOVE\"\n          ]\n        }\n      }\n    }\n  },\n  {\n    $match: {\n      hasExperienceExplored: 1,\n      hasEndedPhase: 0,\n      cvFormats: { $ne: [] }\n    }\n  },\n  {\n    $unwind: \"$cvFormats\"\n  },\n  {\n    $group: {\n      _id: \"$cvFormats\",\n      count: { $sum: 1 }\n    }\n  },\n  {\n    $project: {\n      cv_format: \"$_id\",\n      count: 1,\n      _id: 0\n    }\n  },\n  {\n    $sort: { count: -1 }\n  }\n]","queryId":null,"interactiveFiltering":"highlight","embedding":{}},"item-30":{"title":"CV Downloaded","description":"Users who downloaded a CV after having completed a conversation","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"donut","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[],"channels":{"value":{"field":"count","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"sum"},"label":{"field":"cv_format","type":"nominal","inferredType":"String","channelType":"category","isBinning":false,"sort":{"axis":"Category","order":"ascending"},"allOthers":true}},"reductions":{},"customisations":{"options":{"colorDiscrete":{"enabled":true,"value":{"range":["#71becd","#b97dc9"],"domain":["DOCX","PDF"]}},"dataCategoryLabels":{"enabled":true,"value":null},"dataValueLabels":{"enabled":true,"value":"value"}},"axes":{},"channels":{"value":{"labelOverride":{"enabled":true,"value":"count ( _id )"},"numberFormatting":{"enabled":true,"value":"Default"}},"label":{}},"conditionalFormatting":[]},"chartType":"Donut","meta":{"legends":{"min":1,"max":17}},"sample":false,"query":"[\n  {\n    $match: {\n      event_type: { $in: [100002, 200001] }\n    }\n  },\n  {\n    $group: {\n      _id: \"$anonymized_session_id\",\n      hasEndedPhase: {\n        $max: {\n          $cond: [\n            {\n              $and: [\n                { $eq: [\"$event_type\", 100002] },\n                { $eq: [\"$phase\", \"ENDED\"] }\n              ]\n            },\n            1,\n            0\n          ]\n        }\n      },\n      cvFormats: {\n        $push: {\n          $cond: [\n            { $eq: [\"$event_type\", 200001] },\n            \"$cv_format\",\n            \"$$REMOVE\"\n          ]\n        }\n      }\n    }\n  },\n  {\n    $match: {\n      hasEndedPhase: 1,\n      cvFormats: { $ne: [] }\n    }\n  },\n  {\n    $unwind: \"$cvFormats\"\n  },\n  {\n    $group: {\n      _id: \"$cvFormats\",\n      count: { $sum: 1 }\n    }\n  },\n  {\n    $project: {\n      cv_format: \"$_id\",\n      count: 1,\n      _id: 0\n    }\n  },\n  {\n    $sort: { count: -1 }\n  }\n]","queryId":null,"interactiveFiltering":"highlight","embedding":{}},"item-29":{"title":"CV Downloaded","description":"Overall downloaded CVs broken down by type","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"donut","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[],"channels":{"value":{"field":"_id","type":"quantitative","inferredType":"String","channelType":"aggregation","aggregate":"count"},"label":{"field":"cv_format","type":"nominal","inferredType":"String","channelType":"category","isBinning":false,"sort":{"axis":"Aggregated Value","order":"ascending"},"allOthers":true}},"reductions":{},"customisations":{"options":{"colorDiscrete":{"enabled":true,"value":{"range":["#16CC62","#f09e75"],"domain":["DOCX","PDF"]}},"dataCategoryLabels":{"enabled":true,"value":null},"dataValueLabels":{"enabled":true,"value":"value"}},"axes":{},"channels":{"value":{"labelOverride":{"enabled":true,"value":"count ( _id )"},"numberFormatting":{"enabled":true,"value":"Default"}},"label":{"labelOverride":{"enabled":true,"value":"CV Format"}}},"conditionalFormatting":[]},"chartType":"Donut","meta":{"legends":{"min":1,"max":17}},"sample":false,"query":"{\n  event_type: 200001 // CV_DOWNLOADED\n}","queryId":null,"interactiveFiltering":"highlight","embedding":{}},"item-28":{"title":"Average No. of Experiences Explored","description":"per Conversation","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"number","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[],"channels":{"value":{"field":"experience_count","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"mean"}},"reductions":{},"customisations":{"options":{},"axes":{},"channels":{"value":{"labelOverride":{"enabled":true,"value":"Avg. No. of experiences per conversation"},"numberFormatting":{"enabled":true,"value":"Custom"},"numberDecimals":{"enabled":true,"value":"2"}}},"conditionalFormatting":[]},"chartType":"Number","meta":{},"sample":false,"query":"{\n  event_type: 100008,\n  experience_count: { $gt: 0 }\n}","queryId":null,"interactiveFiltering":"highlight","embedding":{}},"item-26":{"title":"Average No. of Turns","description":"per Conversation","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"number","itemType":"chart","filters":[],"missedFields":[{"count":50,"name":"turn_count","path":"turn_count","type":"Number","nestedArrayDepth":0}],"lookupFields":[],"convertedFields":[],"calculatedFields":[],"channels":{"value":{"field":"turn_count","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"mean"}},"reductions":{},"customisations":{"options":{},"axes":{},"channels":{"value":{"labelOverride":{"enabled":true,"value":"Average No. of turns per conversation"},"numberFormatting":{"enabled":true,"value":"Custom"},"numberDecimals":{"enabled":true,"value":"2"}}},"conditionalFormatting":[]},"chartType":"Number","meta":{},"sample":false,"query":"{\n  event_type: 100005 // CONVERSATION_TURN -> 1 conversation turn event equals one conversation session\n}","queryId":null,"interactiveFiltering":"highlight","embedding":{}},"item-27":{"title":"Average No. of Experiences Discovered","description":"per Conversation","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"number","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[],"channels":{"value":{"field":"experience_count","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"mean"}},"reductions":{},"customisations":{"options":{},"axes":{},"channels":{"value":{"labelOverride":{"enabled":true,"value":"Avg. No. of experiences per conversation"},"numberFormatting":{"enabled":true,"value":"Custom"},"numberDecimals":{"enabled":true,"value":"2"}}},"conditionalFormatting":[]},"chartType":"Number","meta":{},"sample":false,"query":"{\n  event_type: 100007,\n  experience_count: { $gt: 0 }\n}","queryId":null,"interactiveFiltering":"highlight","embedding":{}},"item-39":{"title":"Drop-off breakdown by Conversation Phase (percentage)","description":"Percentage of started conversations, broken down by the phase where they dropped off.&nbsp;","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"combo-stacked","itemType":"chart","filters":[{"fieldPath":"phase","disabled":false,"type":"String","settings":{"allOthers":true,"values":[]}}],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[{"fieldPath":"phase_label_ordered","rawExpression":"{\n  $switch: {\n    branches: [\n      { case: { $eq: [\"$phase\", \"INTRO\"] }, then: \"1_INTRO\" },\n      { case: { $eq: [\"$phase\", \"COLLECT_EXPERIENCES\"] }, then: \"2_COLLECT_EXPERIENCES\" },\n      { case: { $eq: [\"$phase\", \"DIVE_IN\"] }, then: \"3_DIVE_IN\" },\n      { case: { $eq: [\"$phase\", \"ENDED\"] }, then: \"4_ENDED\" }\n    ],\n    default: \"0_UNKNOWN\"\n  }\n}\n","derivedMQL":"{\"$switch\":{\"branches\":[{\"case\":{\"$eq\":[\"$phase\",\"INTRO\"]},\"then\":\"1_INTRO\"},{\"case\":{\"$eq\":[\"$phase\",\"COLLECT_EXPERIENCES\"]},\"then\":\"2_COLLECT_EXPERIENCES\"},{\"case\":{\"$eq\":[\"$phase\",\"DIVE_IN\"]},\"then\":\"3_DIVE_IN\"},{\"case\":{\"$eq\":[\"$phase\",\"ENDED\"]},\"then\":\"4_ENDED\"}],\"default\":\"0_UNKNOWN\"}}"}],"channels":{"y":{"field":"ENDED","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"sum"},"x":{"field":"timestamp","type":"nominal","inferredType":"Date","channelType":"category","isBinning":true,"temporalBinning":["year","month","date"]},"y_series_0":{"field":"DIVE_IN","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"sum"},"ylines":{"field":"_DROPOUT","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"sum"},"y_series_1":{"field":"COLLECT_EXPERIENCES","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"sum"},"y_series_2":{"field":"INTRO","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"sum"}},"reductions":{},"customisations":{"options":{"colorDiscrete":{"enabled":true,"value":{"range":["#16cc62","#196ee6","#e6b219","#e6196e","#000000"],"domain":["y","y_series_0","y_series_1","y_series_2","ylines"]}},"dashStyles":{"enabled":true,"value":null},"lineSmoothing":{"enabled":true,"value":"monotone"},"dataMarkers":{"enabled":true,"value":null},"labelSize":{"enabled":true,"value":"120"}},"axes":{"x":{"categoryLabelAngle":{"enabled":true,"value":"diagonal"}},"y":{"labelOverride":{"enabled":true,"value":"Percentage"}}},"channels":{"y":{"labelOverride":{"enabled":true,"value":"ENDED"},"numberFormatting":{"enabled":true,"value":"Custom"},"numberMultiplier":{"enabled":true,"value":"100"},"numberSuffix":{"enabled":true,"value":"%"}},"x":{"labelOverride":{"enabled":true,"value":"Date"},"datePreset":{"enabled":true,"value":"Custom"},"dateTimeFormatting":{"enabled":true,"value":"ddd-DD-MMM"}},"y_series_0":{"labelOverride":{"enabled":true,"value":"DIVE_IN"},"numberFormatting":{"enabled":true,"value":"Custom"},"numberMultiplier":{"enabled":true,"value":"100"},"numberSuffix":{"enabled":true,"value":"%"}},"ylines":{"labelOverride":{"enabled":true,"value":"users who started but didn’t finish"},"numberFormatting":{"enabled":true,"value":"Custom"},"numberDecimals":{"enabled":true,"value":"2"},"numberMultiplier":{"enabled":true,"value":"100"},"numberSuffix":{"enabled":true,"value":"%"}},"y_series_1":{"labelOverride":{"enabled":true,"value":"COLLECT_EXPERIENCES"},"numberFormatting":{"enabled":true,"value":"Custom"},"numberMultiplier":{"enabled":true,"value":"100"},"numberSuffix":{"enabled":true,"value":"%"}},"y_series_2":{"labelOverride":{"enabled":true,"value":"INTRO"},"numberFormatting":{"enabled":true,"value":"Custom"},"numberMultiplier":{"enabled":true,"value":"100"},"numberSuffix":{"enabled":true,"value":"%"}}},"conditionalFormatting":[]},"chartType":"Stacked Combo","meta":{},"sample":false,"query":"[\n  {\n    $match: {\n      event_type: 100002,\n      phase: { $in: [\"INTRO\", \"COLLECT_EXPERIENCES\", \"DIVE_IN\", \"ENDED\"] }\n    }\n  },\n  {\n    $addFields: {\n      date: { $dateTrunc: { date: \"$timestamp\", unit: \"day\" } },\n      phaseOrder: {\n        $switch: {\n          branches: [\n            { case: { $eq: [\"$phase\", \"INTRO\"] }, then: 1 },\n            { case: { $eq: [\"$phase\", \"COLLECT_EXPERIENCES\"] }, then: 2 },\n            { case: { $eq: [\"$phase\", \"DIVE_IN\"] }, then: 3 },\n            { case: { $eq: [\"$phase\", \"ENDED\"] }, then: 4 }\n          ],\n          default: 99\n        }\n      }\n    }\n  },\n  {\n    $sort: {\n      anonymized_user_id: 1,\n      date: 1,\n      phaseOrder: -1\n    }\n  },\n  {\n    $group: {\n      _id: {\n        session: \"$anonymized_session_id\",\n        date: {$min: \"$date\" }\n      },\n      lastPhase: { $first: \"$phase\" }\n    }\n  },\n  {\n    $addFields: {\n      phase_label_ordered: {\n        $switch: {\n          branches: [\n            { case: { $eq: [\"$lastPhase\", \"INTRO\"] }, then: \"4_INTRO\" },\n            {\n              case: { $eq: [\"$lastPhase\", \"COLLECT_EXPERIENCES\"] },\n              then: \"3_COLLECT_EXPERIENCES\"\n            },\n            { case: { $eq: [\"$lastPhase\", \"DIVE_IN\"] }, then: \"2_DIVE_IN\" },\n            { case: { $eq: [\"$lastPhase\", \"ENDED\"] }, then: \"1_ENDED\" }\n          ],\n          default: \"0_UNKNOWN\"\n        }\n      }\n    }\n  },\n  {\n    $group: {\n      _id: {\n        date: \"$_id.date\",\n        phase: \"$phase_label_ordered\"\n      },\n      sessionCount: { $sum: 1 }\n    }\n  },\n  {\n    $group: {\n      _id: \"$_id.date\",\n      phases: {\n        $push: {\n          k: \"$_id.phase\",\n          v: \"$sessionCount\"\n        }\n      }\n    }\n  },\n  {\n    $addFields: {\n      phaseCounts: {\n        $arrayToObject: \"$phases\"\n      }\n    }\n  },\n  {\n    $addFields: {\n      total: {\n        $reduce: {\n          input: { $objectToArray: \"$phaseCounts\" },\n          initialValue: 0,\n          in: { $add: [\"$$value\", \"$$this.v\"] }\n        }\n      }\n    }\n  },\n  {\n    $project: {\n      timestamp: \"$_id\",\n      INTRO: {\n        $cond: [\n          { $eq: [\"$total\", 0] },\n          0,\n          {\n            $round: [\n              { $divide: [{ $ifNull: [\"$phaseCounts.4_INTRO\", 0] }, \"$total\"] },\n              4\n            ]\n          }\n        ]\n      },\n      COLLECT_EXPERIENCES: {\n        $cond: [\n          { $eq: [\"$total\", 0] },\n          0,\n          {\n            $round: [\n              {\n                $divide: [\n                  { $ifNull: [\"$phaseCounts.3_COLLECT_EXPERIENCES\", 0] },\n                  \"$total\"\n                ]\n              },\n              4\n            ]\n          }\n        ]\n      },\n      DIVE_IN: {\n        $cond: [\n          { $eq: [\"$total\", 0] },\n          0,\n          {\n            $round: [\n              {\n                $divide: [{ $ifNull: [\"$phaseCounts.2_DIVE_IN\", 0] }, \"$total\"]\n              },\n              4\n            ]\n          }\n        ]\n      },\n      ENDED: {\n        $cond: [\n          { $eq: [\"$total\", 0] },\n          0,\n          {\n            $round: [\n              { $divide: [{ $ifNull: [\"$phaseCounts.1_ENDED\", 0] }, \"$total\"] },\n              4\n            ]\n          } // round to the nearest ten thousandths so that we can multiplu it by 100 later\n        ]\n      },\n      _DROPOUT: {\n        $cond: [\n          { $eq: [\"$total\", 0] },\n          0,\n          {\n            $round: [\n              {\n                $subtract: [\n                  1,\n                  {\n                    $divide: [\n                      { $ifNull: [\"$phaseCounts.1_ENDED\", 0] },\n                      \"$total\"\n                    ]\n                  }\n                ]\n              },\n              2\n            ]\n          }\n        ]\n      }\n    }\n  },\n  {\n    $sort: { timestamp: 1 }\n  }\n]","queryId":null,"interactiveFiltering":"filter","embedding":{}},"item-38":{"title":"Drop-off breakdown by Conversation Phase (absolute)","description":"Number of conversations started, broken down by the phase where they dropped off","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"combo-stacked","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[],"channels":{"x":{"field":"timestamp","type":"nominal","inferredType":"Date","channelType":"category","isBinning":true,"temporalBinning":["year","month","date"]},"y":{"field":"ENDED","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"sum"},"y_series_0":{"field":"DIVE_IN","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"sum"},"y_series_1":{"field":"COLLECT_EXPERIENCES","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"sum"},"y_series_2":{"field":"INTRO","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"sum"},"ylines":{"field":"_DROPOUT","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"sum"}},"reductions":{},"customisations":{"options":{"colorDiscrete":{"enabled":true,"value":{"range":["#16cc62","#196ee6","#E6B219","#e6196e","#000000"],"domain":["y","y_series_0","y_series_1","y_series_2","ylines"]}},"dashStyles":{"enabled":true,"value":null},"lineSmoothing":{"enabled":true,"value":"monotone"},"dataMarkers":{"enabled":true,"value":null},"dataValueLabels":{"enabled":true,"value":null},"labelSize":{"enabled":true,"value":"109"}},"axes":{"x":{"categoryLabelAngle":{"enabled":true,"value":"diagonal"}},"y":{"labelOverride":{"enabled":true,"value":"Number of Users"}}},"channels":{"x":{"labelOverride":{"enabled":true,"value":"Date"},"datePreset":{"enabled":true,"value":"Custom"},"dateTimeFormatting":{"enabled":true,"value":"ddd-DD-MMM"}},"y":{"labelOverride":{"enabled":true,"value":"ENDED"},"numberFormatting":{"enabled":true,"value":"Custom"}},"y_series_0":{"labelOverride":{"enabled":true,"value":"DIVE_IN"},"numberFormatting":{"enabled":true,"value":"Default"}},"y_series_1":{"labelOverride":{"enabled":true,"value":"COLLECT_EXPERIENCES"},"numberFormatting":{"enabled":true,"value":"Default"}},"y_series_2":{"labelOverride":{"enabled":true,"value":"INTRO"},"numberFormatting":{"enabled":true,"value":"Default"}},"ylines":{"labelOverride":{"enabled":true,"value":"users who started but didn’t finish"},"numberFormatting":{"enabled":true,"value":"Custom"},"numberGrouping":{"enabled":false,"value":null},"numberDecimals":{"enabled":true,"value":"0"},"numberPrefix":{"enabled":true,"value":""},"numberSuffix":{"enabled":true,"value":"         `"}}},"conditionalFormatting":[]},"chartType":"Stacked Combo","meta":{},"sample":false,"query":"[\n  {\n    $match: {\n      event_type: 100002,\n      phase: { $in: [\"INTRO\", \"COLLECT_EXPERIENCES\", \"DIVE_IN\", \"ENDED\"] }\n    }\n  },\n  {\n    $addFields: {\n      date: { $dateTrunc: { date: \"$timestamp\", unit: \"day\" } },\n      phaseOrder: {\n        $switch: {\n          branches: [\n            { case: { $eq: [\"$phase\", \"INTRO\"] }, then: 1 },\n            { case: { $eq: [\"$phase\", \"COLLECT_EXPERIENCES\"] }, then: 2 },\n            { case: { $eq: [\"$phase\", \"DIVE_IN\"] }, then: 3 },\n            { case: { $eq: [\"$phase\", \"ENDED\"] }, then: 4 }\n          ],\n          default: 99\n        }\n      }\n    }\n  },\n  {\n    $sort: {\n      anonymized_user_id: 1,\n      date: 1,\n      phaseOrder: -1\n    }\n  },\n  {\n    $group: {\n      _id: {\n        session: \"$anonymized_session_id\",\n        date: {$min: \"$date\"}\n      },\n      lastPhase: { $first: \"$phase\" }\n    }\n  },\n  {\n    $addFields: {\n      phase_label_ordered: {\n        $switch: {\n          branches: [\n            { case: { $eq: [\"$lastPhase\", \"INTRO\"] }, then: \"4_INTRO\" },\n            { case: { $eq: [\"$lastPhase\", \"COLLECT_EXPERIENCES\"] }, then: \"3_COLLECT_EXPERIENCES\" },\n            { case: { $eq: [\"$lastPhase\", \"DIVE_IN\"] }, then: \"2_DIVE_IN\" },\n            { case: { $eq: [\"$lastPhase\", \"ENDED\"] }, then: \"1_ENDED\" }\n          ],\n          default: \"0_UNKNOWN\"\n        }\n      }\n    }\n  },\n  {\n    $group: {\n      _id: {\n        date: \"$_id.date\",\n        phase: \"$phase_label_ordered\"\n      },\n      sessionCount: { $sum: 1 }\n    }\n  },\n  {\n    $group: {\n      _id: \"$_id.date\",\n      phases: {\n        $push: {\n          k: \"$_id.phase\",\n          v: \"$sessionCount\"\n        }\n      }\n    }\n  },\n  {\n    $addFields: {\n      phaseCounts: { $arrayToObject: \"$phases\" }\n    }\n  },\n  {\n    $addFields: {\n      total: {\n        $reduce: {\n          input: { $objectToArray: \"$phaseCounts\" },\n          initialValue: 0,\n          in: { $add: [\"$$value\", \"$$this.v\"] }\n        }\n      }\n    }\n  },\n  {\n    $project: {\n      timestamp: \"$_id\",\n      INTRO: { $getField: { field: \"4_INTRO\", input: \"$phaseCounts\" } },\n      COLLECT_EXPERIENCES: { $getField: { field: \"3_COLLECT_EXPERIENCES\", input: \"$phaseCounts\" } },\n      DIVE_IN: { $getField: { field: \"2_DIVE_IN\", input: \"$phaseCounts\" } },\n      ENDED: { $getField: { field: \"1_ENDED\", input: \"$phaseCounts\" } },\n      _DROPOUT: {\n        $subtract: [\n          \"$total\",\n          { $ifNull: [{ $getField: { field: \"1_ENDED\", input: \"$phaseCounts\" } }, 0] }\n        ]\n      }\n    }\n  },\n  {\n    $sort: { timestamp: 1 }\n  }\n]","queryId":null,"interactiveFiltering":"highlight","embedding":{}},"item-34":{"title":"Overall Dropout percentage","description":"","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"number","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[{"fieldPath":"dropout","rawExpression":"{ $subtract: [1, { $divide: [\"$totalUserConcludedConversation\", \"$totalUserCreatedAccount\"] }] }\n","derivedMQL":"{\"$subtract\":[1,{\"$divide\":[\"$totalUserConcludedConversation\",\"$totalUserCreatedAccount\"]}]}"}],"channels":{"value":{"field":"dropoutPercentage","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"mean"}},"reductions":{},"customisations":{"options":{},"axes":{},"channels":{"value":{"numberFormatting":{"enabled":true,"value":"Custom"},"numberDecimals":{"enabled":true,"value":"1"},"numberMultiplier":{"enabled":true,"value":"100"},"numberSuffix":{"enabled":true,"value":"%"}}},"conditionalFormatting":[{"type":"discrete","conditions":[{"target":{"value":"value","type":"CHANNEL"},"operator":"NUMBER_GREATER_THAN","value":"0.35"}],"applyToEntireRow":false,"styling":{"color":"rgb(193, 4, 34)","backgroundColor":"rgba(0, 0, 0, 0)","fontStyle":"normal","fontWeight":"normal","textDecoration":"initial"}},{"type":"discrete","conditions":[{"target":{"value":"value","type":"CHANNEL"},"operator":"NUMBER_LESS_THAN","value":"0.1"}],"applyToEntireRow":false,"styling":{"color":"rgb(22, 204, 98)","backgroundColor":"rgba(0, 0, 0, 0)","fontStyle":"normal","fontWeight":"normal","textDecoration":"initial"}}]},"chartType":"Number","meta":{},"sample":false,"query":"[\n  {\n    $match: {\n      event_type: { $in: [100001, 100002] } // get the events that are either user created or conversation phase changed\n    }\n  },\n  {\n    $group: {\n      _id: \"$anonymized_user_id\",\n      firstTimestamp: { $min: \"$timestamp\" },\n      totalEnded: {\n        $sum: {\n          $cond: [\n            {\n              $and: [\n                { $eq: [\"$event_type\", 100002] },\n                { $eq: [\"$phase\", \"ENDED\"] }\n              ]\n            },\n            1,\n            0\n          ]\n        }\n      },\n      totalCreated: {\n        $sum: { $cond: [{ $eq: [\"$event_type\", 100001] }, 1, 0] }\n      }\n    }\n  },\n  {\n    $addFields: {\n      dropoutPercentage: {\n        $cond: [\n          { $eq: [\"$totalCreated\", 0] },\n          null,\n          { $subtract: [1, { $divide: [\"$totalEnded\", \"$totalCreated\"] }] }\n        ]\n      },\n      timestamp: \"$firstTimestamp\"\n    }\n  }\n]","queryId":null,"interactiveFiltering":"filter","embedding":{}},"item-33":{"title":"Dropoff Percentage","description":"Users who registered but didn't complete a conversation","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"line-discrete","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[{"fieldPath":"beforeStartingPercentage","convertTo":"double","arrayParentPaths":[]}],"calculatedFields":[{"fieldPath":"normalizedExploringPercentage","rawExpression":"{\n  \"$cond\": [\n    { \"$lt\": [\"$beforeExploringPercentage\", 0] },\n    null,\n    \"$beforeExploringPercentage\"\n  ]\n}\n","derivedMQL":"{\"$cond\":[{\"$lt\":[\"$beforeExploringPercentage\",0]},null,\"$beforeExploringPercentage\"]}"},{"fieldPath":"normalizedDiscoveringPercentage","rawExpression":"{\n  \"$cond\": [\n    { \"$lt\": [\"$beforeDiscoveringPercentage\", 0] },\n    null,\n    \"$beforeDiscoveringPercentage\"\n  ]\n}\n","derivedMQL":"{\"$cond\":[{\"$lt\":[\"$beforeDiscoveringPercentage\",0]},null,\"$beforeDiscoveringPercentage\"]}"}],"channels":{"y_series_0":{"field":"beforeStartingPercentage","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"mean"},"y_series_1":{"field":"normalizedDiscoveringPercentage","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"mean"},"y":{"field":"dropoutPercentage","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"mean"},"x":{"field":"timestamp","type":"nominal","inferredType":"Date","channelType":"category","isBinning":true,"temporalBinning":["year","month","date"]},"y_series_2":{"field":"normalizedExploringPercentage","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"mean"},"y_series_3":{"field":"completionPercentage","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"mean"}},"reductions":{},"customisations":{"options":{"colorDiscrete":{"enabled":true,"value":{"range":["#000000","#c10422","#e65d19","#8a27a5","#16cc62"],"domain":["y","y_series_0","y_series_1","y_series_2","y_series_3"]}},"lineSmoothing":{"enabled":true,"value":"monotone"},"dataMarkers":{"enabled":true,"value":null},"dataValueLabels":{"enabled":true,"value":null},"labelSize":{"enabled":true,"value":"73"}},"axes":{"x":{"categoryLabelAngle":{"enabled":true,"value":"diagonal"}},"y":{"labelOverride":{"enabled":true,"value":"Percentage"}}},"channels":{"y_series_0":{"labelOverride":{"enabled":true,"value":"Dropped off before starting conversation"},"numberFormatting":{"enabled":true,"value":"Percentage"},"numberDecimals":{"enabled":true,"value":"2"},"numberMultiplier":{"enabled":true,"value":"100"},"numberSuffix":{"enabled":true,"value":"%"}},"y_series_1":{"labelOverride":{"enabled":true,"value":"Dropped off before discovering experiences"},"numberFormatting":{"enabled":true,"value":"Percentage"},"numberDecimals":{"enabled":true,"value":"2"},"numberMultiplier":{"enabled":true,"value":"100"},"numberSuffix":{"enabled":true,"value":"%"}},"y":{"labelOverride":{"enabled":true,"value":"Dropoff percentage"},"numberFormatting":{"enabled":true,"value":"Percentage"},"numberDecimals":{"enabled":true,"value":"2"},"numberMultiplier":{"enabled":true,"value":"100"},"numberSuffix":{"enabled":true,"value":"%"}},"x":{"dateTimeFormatting":{"enabled":true,"value":"DD-MMM-YYYY"}},"y_series_2":{"labelOverride":{"enabled":true,"value":"Dropped off before exploring experiences"},"numberFormatting":{"enabled":true,"value":"Percentage"},"numberDecimals":{"enabled":true,"value":"2"},"numberMultiplier":{"enabled":true,"value":"100"},"numberSuffix":{"enabled":true,"value":"%"}},"y_series_3":{"labelOverride":{"enabled":true,"value":"Completed Conversation"},"numberFormatting":{"enabled":true,"value":"Percentage"},"numberDecimals":{"enabled":true,"value":"2"},"numberMultiplier":{"enabled":true,"value":"100"},"numberSuffix":{"enabled":true,"value":"%"}}},"conditionalFormatting":[]},"chartType":"Line","meta":{"columnWidths":{"undefined":261}},"sample":false,"query":"[\n  {\n    $match: { event_type: { $in: [100001, 100002, 100007, 100008] } }\n  },\n  {\n    $group: {\n      _id: \"$anonymized_user_id\",\n      firstTimestamp: { $min: \"$timestamp\" },\n      totalEnded: {\n        $sum: {\n          $cond: [\n            {\n              $and: [\n                { $eq: [\"$event_type\", 100002] },\n                { $eq: [\"$phase\", \"ENDED\"] }\n              ]\n            },\n            1,\n            0\n          ]\n        }\n      },\n      totalStarted: {\n        $sum: {\n          $cond: [\n            {\n              $and: [\n                { $eq: [\"$event_type\", 100002] },\n                { $eq: [\"$phase\", \"INTRO\"] }\n              ]\n            },\n            1,\n            0\n          ]\n        }\n      },\n      totalDiscovered: {\n        $sum: {\n          $cond: [\n            {\n              $and: [\n                { $eq: [\"$event_type\", 100007] },\n                { $gt: [\"$experience_count\", 0] }\n              ]\n            },\n            1,\n            0\n          ]\n        }\n      },\n      totalExplored: {\n        $sum: {\n          $cond: [\n            {\n              $and: [\n                { $eq: [\"$event_type\", 100008] },\n                { $gt: [\"$experience_count\", 0] }\n              ]\n            },\n            1,\n            0\n          ]\n        }\n      },\n      totalCreated: {\n        $sum: { $cond: [{ $eq: [\"$event_type\", 100001] }, 1, 0] }\n      }\n    }\n  },\n  {\n    $addFields: {\n      dropoutPercentage: {\n        $cond: [\n          { $eq: [\"$totalCreated\", 0] },\n          null,\n          { $subtract: [1, { $divide: [\"$totalEnded\", \"$totalCreated\"] }] }\n        ]\n      },\n      completionPercentage: {\n        $cond: [\n          { $eq: [\"$totalCreated\", 0] },\n          null,\n          { $divide: [\"$totalEnded\", \"$totalCreated\"] }\n        ]\n      },\n      beforeDiscoveringPercentage: {\n        $cond: [\n          { $eq: [\"$totalCreated\", 0] },\n          null,\n          { $subtract: [1, { $divide: [\"$totalDiscovered\", \"$totalCreated\"] }] }\n        ]\n      },\n      beforeExploringPercentage: {\n        $cond: [\n          { $eq: [\"$totalCreated\", 0] },\n          null,\n          { $subtract: [1, { $divide: [\"$totalExplored\", \"$totalCreated\"] }] }\n        ]\n      },\n      beforeStartingPercentage: {\n        $cond: [\n          { $eq: [\"$totalCreated\", 0] },\n          null,\n          { $subtract: [1, { $divide: [\"$totalStarted\", \"$totalCreated\"] }] }\n        ]\n      },\n      timestamp: \"$firstTimestamp\"\n    }\n  }\n]","queryId":null,"interactiveFiltering":"filter","embedding":{}},"item-37":{"title":"Users dropped&nbsp;","description":"before Exploring Experiences","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"number","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[{"fieldPath":"normalizedBeforeExploringPercentage","rawExpression":"{\n  \"$cond\": [\n    { \"$lt\": [\"$beforeExploringPercentage\", 0] },\n    null,\n    \"$beforeExploringPercentage\"\n  ]\n}\n","derivedMQL":"{\"$cond\":[{\"$lt\":[\"$beforeExploringPercentage\",0]},null,\"$beforeExploringPercentage\"]}"},{"fieldPath":"droppedBeforeExperience","rawExpression":"{ $subtract: [1, {\n  $divide: ['$usersWithExperienceExplored', '$usersCreated']\n}]}\n\n","derivedMQL":"{\"$subtract\":[1,{\"$divide\":[\"$usersWithExperienceExplored\",\"$usersCreated\"]}]}"}],"channels":{"value":{"field":"normalizedBeforeExploringPercentage","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"mean"}},"reductions":{},"customisations":{"options":{},"axes":{},"channels":{"value":{"numberFormatting":{"enabled":true,"value":"Percentage"},"numberDecimals":{"enabled":true,"value":"2"},"numberMultiplier":{"enabled":true,"value":"100"},"numberSuffix":{"enabled":true,"value":"%"}}},"conditionalFormatting":[{"type":"discrete","conditions":[{"target":{"value":"value","type":"CHANNEL"},"operator":"NUMBER_GREATER_THAN","value":"0.35"}],"applyToEntireRow":false,"styling":{"color":"rgb(193, 4, 34)","backgroundColor":"rgba(0, 0, 0, 0)","fontStyle":"normal","fontWeight":"normal","textDecoration":"initial"}},{"type":"discrete","conditions":[{"target":{"value":"value","type":"CHANNEL"},"operator":"NUMBER_LESS_THAN","value":"0.1"}],"applyToEntireRow":false,"styling":{"color":"rgb(22, 204, 98)","backgroundColor":"rgba(0, 0, 0, 0)","fontStyle":"normal","fontWeight":"normal","textDecoration":"initial"}}]},"chartType":"Number","meta":{},"sample":false,"query":"[\n  {\n    $match: {\n      event_type: { $in: [100001, 100008] }\n    }\n  },\n  {\n    $group: {\n      _id: \"$anonymized_user_id\",\n      firstTimestamp: { $min: \"$timestamp\" },\n      totalExplored: {\n        $sum: {\n          $cond: [\n            {\n              $and: [\n                { $eq: [\"$event_type\", 100008] },\n                { $gt: [\"$experience_count\", 0] }\n              ]\n            },\n            1,\n            0\n          ]\n        }\n      },\n      totalCreated: {\n        $sum: { $cond: [{ $eq: [\"$event_type\", 100001] }, 1, 0] }\n      }\n    }\n  },\n  {\n    $addFields: {\n      beforeExploringPercentage: {\n        $cond: [\n          { $eq: [\"$totalCreated\", 0] },\n          null,\n          { $subtract: [1, { $divide: [\"$totalExplored\", \"$totalCreated\"] }] }\n        ]\n      },\n      timestamp: \"$firstTimestamp\"\n    }\n  }\n]","queryId":null,"interactiveFiltering":"filter","embedding":{}},"item-36":{"title":"Users dropped&nbsp;","description":"before Discovering Experiences","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"number","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[{"fieldPath":"normalizedBeforeDiscoveringPercentage","rawExpression":"{\n  \"$cond\": [\n    { \"$lt\": [\"$beforeDiscoveringPercentage\", 0] },\n    null,\n    \"$beforeDiscoveringPercentage\"\n  ]\n}\n","derivedMQL":"{\"$cond\":[{\"$lt\":[\"$beforeDiscoveringPercentage\",0]},null,\"$beforeDiscoveringPercentage\"]}"},{"fieldPath":"droppedBeforeExperience","rawExpression":"{\n        $cond: [\n          { $eq: [\"$totalCreated\", 0] },\n          null,\n          { $subtract: [1, { $divide: [\"$totalDiscovered\", \"$totalCreated\"] }] }\n        ]\n      }","derivedMQL":"{\"$cond\":[{\"$eq\":[\"$totalCreated\",0]},null,{\"$subtract\":[1,{\"$divide\":[\"$totalDiscovered\",\"$totalCreated\"]}]}]}"}],"channels":{"value":{"field":"normalizedBeforeDiscoveringPercentage","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"mean"}},"reductions":{},"customisations":{"options":{},"axes":{},"channels":{"value":{"numberFormatting":{"enabled":true,"value":"Percentage"},"numberDecimals":{"enabled":true,"value":"2"},"numberMultiplier":{"enabled":true,"value":"100"},"numberSuffix":{"enabled":true,"value":"%"}}},"conditionalFormatting":[{"type":"discrete","conditions":[{"target":{"value":"value","type":"CHANNEL"},"operator":"NUMBER_GREATER_THAN","value":"0.35"}],"applyToEntireRow":false,"styling":{"color":"rgb(193, 4, 34)","backgroundColor":"rgba(0, 0, 0, 0)","fontStyle":"normal","fontWeight":"normal","textDecoration":"initial"}},{"type":"discrete","conditions":[{"target":{"value":"value","type":"CHANNEL"},"operator":"NUMBER_LESS_THAN","value":"0.1"}],"applyToEntireRow":false,"styling":{"color":"rgb(22, 204, 98)","backgroundColor":"rgba(0, 0, 0, 0)","fontStyle":"normal","fontWeight":"normal","textDecoration":"initial"}}]},"chartType":"Number","meta":{},"sample":false,"query":"[\n  {\n    $match: {\n      event_type: { $in: [100001, 100007] }\n    }\n  },\n  {\n    $group: {\n      _id: \"$anonymized_user_id\",\n      firstTimestamp: { $min: \"$timestamp\" },\n      totalCreated: {\n        $sum: { $cond: [{ $eq: [\"$event_type\", 100001] }, 1, 0] }\n      },\n      totalDiscovered: {\n        $sum: {\n          $cond: [\n            {\n              $and: [\n                { $eq: [\"$event_type\", 100007] },\n                { $gt: [\"$experience_count\", 0] }\n              ]\n            },\n            1,\n            0\n          ]\n        }\n      }\n    }\n  },\n  {\n    $addFields: {\n      beforeDiscoveringPercentage: {\n        $cond: [\n          { $eq: [\"$totalCreated\", 0] },\n          null,\n          { $subtract: [1, { $divide: [\"$totalDiscovered\", \"$totalCreated\"] }] }\n        ]\n      },\n      timestamp: \"$firstTimestamp\"\n    }\n  }\n]","queryId":null,"interactiveFiltering":"filter","embedding":{}},"item-35":{"title":"Users dropped&nbsp;","description":"before Starting Conversation","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"number","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[{"fieldPath":"droppedBeforeStarting","rawExpression":"{ $subtract: [1, {\n  $divide: ['$usersWithConversation', '$usersCreated']\n}]}\n\n","derivedMQL":"{\"$subtract\":[1,{\"$divide\":[\"$usersWithConversation\",\"$usersCreated\"]}]}"}],"channels":{"value":{"field":"beforeStartingPercentage","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"mean"}},"reductions":{},"customisations":{"options":{},"axes":{},"channels":{"value":{"numberFormatting":{"enabled":true,"value":"Custom"},"numberDecimals":{"enabled":true,"value":"2"},"numberMultiplier":{"enabled":true,"value":"100"},"numberSuffix":{"enabled":true,"value":"%"}}},"conditionalFormatting":[{"type":"discrete","conditions":[{"target":{"value":"value","type":"CHANNEL"},"operator":"NUMBER_GREATER_THAN","value":"0.35"}],"applyToEntireRow":false,"styling":{"color":"rgb(193, 4, 34)","backgroundColor":"rgba(0, 0, 0, 0)","fontStyle":"normal","fontWeight":"normal","textDecoration":"initial"}},{"type":"discrete","conditions":[{"target":{"value":"value","type":"CHANNEL"},"operator":"NUMBER_LESS_THAN","value":"0.1"}],"applyToEntireRow":false,"styling":{"color":"rgb(22, 204, 98)","backgroundColor":"rgba(0, 0, 0, 0)","fontStyle":"normal","fontWeight":"normal","textDecoration":"initial"}}]},"chartType":"Number","meta":{},"sample":false,"query":"[\n  {\n    $match: {\n      event_type: { $in: [100001, 100002] }\n    }\n  },\n  {\n    $group: {\n      _id: \"$anonymized_user_id\",\n      firstTimestamp: { $min: \"$timestamp\" },\n      totalStarted: {\n        $sum: {\n          $cond: [\n            {\n              $and: [\n                { $eq: [\"$event_type\", 100002] },\n                { $eq: [\"$phase\", \"INTRO\"] }\n              ]\n            },\n            1,\n            0\n          ]\n        }\n      },\n      totalCreated: {\n        $sum: { $cond: [{ $eq: [\"$event_type\", 100001] }, 1, 0] }\n      }\n    }\n  },\n  {\n    $addFields: {\n      beforeStartingPercentage: {\n        $cond: [\n          { $eq: [\"$totalCreated\", 0] },\n          null,\n          { $subtract: [1, { $divide: [\"$totalStarted\", \"$totalCreated\"] }] }\n        ]\n      },\n      timestamp: \"$firstTimestamp\"\n    }\n  }\n]","queryId":null,"interactiveFiltering":"filter","embedding":{}},"item-24":{"title":"","description":"","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"top-item","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[{"fieldPath":"label","rawExpression":"{ \"$literal\": \"Overall Statistics\" }\n","derivedMQL":"{\"$literal\":\"Overall Statistics\"}"}],"channels":{"sort":{"field":"label","type":"nominal","inferredType":"String","channelType":"sort","sort":{"axis":"Category","order":"descending"},"isLimiting":true,"limitingSize":1},"display":{"field":"label","type":"nominal","inferredType":"String","channelType":"any"}},"reductions":{},"customisations":{"options":{"labelSize":{"enabled":true,"value":"70"}},"axes":{},"channels":{"sort":{},"display":{"labelOverride":{"enabled":true,"value":"Section"}}},"conditionalFormatting":[]},"chartType":"Top Item","meta":{"legends":{"min":1,"max":98}},"sample":false,"query":null,"queryId":null,"interactiveFiltering":"highlight","embedding":{}},"item-25":{"title":"","description":"","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"top-item","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[{"fieldPath":"label","rawExpression":"{ \"$literal\": \"                     \" }\n","derivedMQL":"{\"$literal\":\"                     \"}"}],"channels":{"sort":{"field":"label","type":"nominal","inferredType":"String","channelType":"sort","sort":{"axis":"Category","order":"descending"},"isLimiting":true,"limitingSize":1},"display":{"field":"label","type":"nominal","inferredType":"String","channelType":"any"}},"reductions":{},"customisations":{"options":{"labelSize":{"enabled":true,"value":"70"}},"axes":{},"channels":{"sort":{},"display":{"labelOverride":{"enabled":true,"value":" "}}},"conditionalFormatting":[]},"chartType":"Top Item","meta":{"legends":{"min":1,"max":98}},"sample":false,"query":null,"queryId":null,"interactiveFiltering":"highlight","embedding":{}},"item-32":{"title":"No. of Experiences Discovered/Explored","description":"with respect to Conversation phase","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"data-table","itemType":"chart","filters":[{"fieldPath":"_id","disabled":false,"type":"Number","settings":{"min":{"enabled":true,"inclusive":true,"value":"1"},"max":{"enabled":false,"inclusive":true,"value":""}}}],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[],"channels":{"group":{"field":"_id","type":"nominal","inferredType":"Number","channelType":"category","isBinning":false,"quantitativeBinning":{"binSize":10}},"value":{"field":"totalDiscovered","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"sum"},"value_series_0":{"field":"totalExplored","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"sum"},"value_series_1":{"field":"atLeastOneExplored","type":"quantitative","inferredType":"Number","channelType":"aggregation","aggregate":"sum"}},"reductions":{},"customisations":{"options":{"totalsColumn":{"enabled":false,"value":null}},"axes":{},"channels":{"group":{"labelOverride":{"enabled":true,"value":"No. of Experiences (N)"},"numberFormatting":{"enabled":true,"value":"Default"}},"value":{"labelOverride":{"enabled":true,"value":"No. of conversations with (N) Experiences Discovered"},"numberFormatting":{"enabled":true,"value":"Default"}},"value_series_0":{"labelOverride":{"enabled":true,"value":"No. of conversations that successfully explored all (N) Experiences"},"numberFormatting":{"enabled":true,"value":"Default"}},"value_series_1":{"labelOverride":{"enabled":true,"value":"No. of conversations that successfully finished the discovery phase "},"numberFormatting":{"enabled":true,"value":"Default"}}},"conditionalFormatting":[]},"chartType":"Data Table","meta":{"columnWidths":{"value":386,"group":221,"value_series_0":494},"sortModel":[],"legends":{"min":1,"max":173}},"sample":true,"query":"[\n    {\n        $match: {\n            event_type: { $in: [100007, 100008] }\n        }\n    },\n    {\n        $group: {\n            _id: {\n                session: \"$anonymized_session_id\",\n                event: \"$event_type\"\n            },\n            count: { $max: \"$experience_count\" },\n            timestamp: { $min: \"$timestamp\" } // capture one timestamp per (session, event)\n        }\n    },\n    {\n        $group: {\n            _id: \"$_id.session\",\n            discoveredCount: {\n                $max: {\n                    $cond: [\n                        { $eq: [\"$_id.event\", 100007] },\n                        \"$count\",\n                        null\n                    ]\n                }\n            },\n            exploredCount: {\n                $max: {\n                    $cond: [\n                        { $eq: [\"$_id.event\", 100008] },\n                        \"$count\",\n                        null\n                    ]\n                }\n            },\n            totalExplored: {\n                $sum: {\n                    $cond: [{ $eq: [\"$_id.event\", 100008] }, 1, 0]\n                }\n            },\n            timestamp: { $min: \"$timestamp\" } // keep one timestamp per session\n        }\n    },\n    {\n        $group: {\n            _id: \"$discoveredCount\",\n            totalDiscovered: { $sum: 1 },\n            atLeastOneExplored: {\n                $sum: {\n                    $cond: [\n                        { $eq: [\"$exploredCount\", null] },\n                        0,\n                        \"$totalExplored\"\n                    ]\n                }\n            },\n            totalExplored: {\n                $sum: {\n                    $cond: [\n                        { $eq: [\"$discoveredCount\", \"$exploredCount\"] },\n                        1,\n                        0\n                    ]\n                }\n            },\n            timestamp: { $min: \"$timestamp\" } // carry timestamp forward for filtering\n        }\n    },\n    {\n        $sort: { _id: 1 }\n    }\n]","queryId":null,"interactiveFiltering":"filter","embedding":{}},"item-40":{"title":"","description":"","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"top-item","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[{"fieldPath":"label","rawExpression":"{ \"$literal\": \"Conversation Dropoff Overview\" }\n","derivedMQL":"{\"$literal\":\"Conversation Dropoff Overview\"}"}],"channels":{"sort":{"field":"label","type":"nominal","inferredType":"String","channelType":"sort","sort":{"axis":"Category","order":"descending"},"isLimiting":true,"limitingSize":1},"display":{"field":"label","type":"nominal","inferredType":"String","channelType":"any"}},"reductions":{},"customisations":{"options":{"labelSize":{"enabled":true,"value":"70"}},"axes":{},"channels":{"sort":{},"display":{"labelOverride":{"enabled":true,"value":"Section"}}},"conditionalFormatting":[]},"chartType":"Top Item","meta":{"legends":{"min":1,"max":98}},"sample":false,"query":null,"queryId":null,"interactiveFiltering":"highlight","embedding":{}},"item-41":{"title":"","description":"","dashboardId":"dashboard-1","dataSourceId":"data-source-1","iconValue":"top-item","itemType":"chart","filters":[],"missedFields":[],"lookupFields":[],"convertedFields":[],"calculatedFields":[{"fieldPath":"label","rawExpression":"{ \"$literal\": \"                     \" }\n","derivedMQL":"{\"$literal\":\"                     \"}"}],"channels":{"sort":{"field":"label","type":"nominal","inferredType":"String","channelType":"sort","sort":{"axis":"Category","order":"descending"},"isLimiting":true,"limitingSize":1},"display":{"field":"label","type":"nominal","inferredType":"String","channelType":"any"}},"reductions":{},"customisations":{"options":{"labelSize":{"enabled":true,"value":"70"}},"axes":{},"channels":{"sort":{},"display":{"labelOverride":{"enabled":true,"value":" "}}},"conditionalFormatting":[]},"chartType":"Top Item","meta":{"legends":{"min":1,"max":98}},"sample":false,"query":null,"queryId":null,"interactiveFiltering":"highlight","embedding":{}}},"dataSources":{"data-source-1":{"alias":"metric_events","collection":"metric_events","database":"compass-application-ajira","deployment":"Ajira","sourceType":"cluster"}},"queries":{}}